/* Author:
	Steve Urmston
*/(function(a,b,c){function h(b){if(!b.hash)return"";var c=a(b.hash);if(!c)return"";var d=c.closest(".noscroll");if(d.length){var e=c.closest(".scrollto");e.length&&e.html().length<=d.html().length&&(d="")}return!d.length&&(location.hostname==b.hostname||!b.hostname)&&location.pathname.replace(/^\//,"")==b.pathname.replace(/^\//,"")?c:""}"use strict";if(typeof jQuery=="undefined")return null;var d,e,f,g;g=new a.prototype.init(c);g.ready(function(){f=g.find("html");e=f.find("head");d=f.find("body");a("#portfolio article").each(function(){a(this).find("span.close").hide();a(this).find("div.panel").each(function(){a(this).css("height","0px")})});a("#portfolio article h2 a").click(function(b){b.preventDefault();var c=a(this).parent().parent(),d=c.find("div.contents"),e="",f="",g=d.find("div.panel"),h="cubic-bezier(.22,.79,.77,.99)",i=c.hasClass("open");if(i){e=a(this).find("span.close");f=a(this).find("span.open");var j=d.outerHeight(!1);e.show().transition({y:j+"px",easing:h,duration:"250ms"}).transition({y:"0px",easing:h,duration:"300ms",delay:50}).transition({delay:50,perspective:"100px",rotateY:"180deg",easing:h,duration:"250ms"},function(){f.transition({rotateY:"0deg",duration:"0ms"}).show();e.hide()});d.delay(350).animate({height:"0px"},300,function(){c.removeClass("open");g.each(function(){a(this).css("height","0px")})})}else{e=a(this).find("span.open");f=a(this).find("span.close");d.css("height","auto");e.show().transition({y:"-55px",easing:h,duration:"125ms"}).transition({y:"-54px",easing:h,duration:"350ms"}).transition({y:"0px",easing:h,duration:"50ms"}).transition({y:"-5px",easing:h,duration:"25ms"}).transition({y:"0px",easing:h,duration:"15ms"}).transition({delay:0,perspective:"100px",rotateY:"180deg",easing:h,duration:"250ms"},function(){c.addClass("open");f.transition({rotateY:"0deg",duration:"0ms"}).show();a(this).hide()});var k=400,l=1;g.each(function(){k+=150*l;a(this).delay(k).transition({height:"300px",easing:"cubic-bezier(.22,.79,.77,.99)",duration:"200ms"});l++})}});d.find("#scrollfix").height(a(b).height());a("#about, #portfolio, #services, #pipeline, #intro").waypoint(function(b,c){var d=a(this).attr("id");if(a('#top a[href*="'+d+'"]').hasClass("active")&&c==="down")return!0;a("#top a").removeClass("active");c==="down"?a('#top a[href*="'+d+'"]').addClass("active"):a('#top a[href*="'+d+'"]').parent().prev().find("a").addClass("active")},{continuous:!0,onlyOnScroll:!1,offset:"1px"});a("a[href*=#]").click(function(d){var e=a(this),f=this,g=h(this);if(!d.isDefaultPrevented()){d.preventDefault();if(location.hash==f.hash)a(b).trigger("hashchange");else{var i=f.hash.substr(1),j=a("").css({visibility:"hidden",position:"fixed",top:"0px"}).attr("id",i).prependTo(c.body);g.attr("id","");location.hash=f.hash;j.remove();g.attr("id",i)}}});a(b).hashchange(function(c){var d=location,e=h(location);if(e.length){var f=location.hash,g=a(f).offset().top,i=a(b).scrollTop(),j=0;i>g?j=i-g:j=g-i;var k=150+j/1e3*150;a.scrollTo(g,k,{easing:a.bez([.14,.32,.79,1.04])})}});a(b).scrollTop()||a(b).trigger("hashchange")});return null})(jQuery,this,this.document);